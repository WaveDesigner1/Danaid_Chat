<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Danaid Chat ‚Äì Logowanie / Rejestracja</title>
  <link rel="stylesheet" href="login.css" />
</head>

<body>
  <div class="butterfly-bg"></div>

  <!-- HEADER -->
  <header class="main-header">
    <h1 class="main-title">Chat Danaid</h1>
  </header>

  <div class="container">
    <!-- LEWA STRONA - INFO -->
    <div class="info-section">
      <h3 class="subtitle">Bezpieczny czat z szyfrowaniem end-to-end</h3>

      <div class="description">
        <p>
          Ten projekt to modu≈Çowy, edukacyjny czat z pe≈Çnym E2EE, w≈Çasnym mechanizmem logowania,
          podpisami RSA, PBKDF2 i lokalnym przechowywaniem klucza prywatnego.
        </p>
        <p>
          Wersja lokalna dzia≈Ça na Twoim komputerze, bez serwer√≥w zewnƒôtrznych.
        </p>
      </div>

      <ul class="features">
        <li>üîê Szyfrowanie RSA + PBKDF2</li>
        <li>üõ°Ô∏è Podpisy cyfrowe</li>
        <li>üì° Zero zewnƒôtrznego backendu</li>
        <li>üë• System znajomych</li>
        <li>üí¨ Pe≈Çne E2EE</li>
      </ul>
    </div>

    <!-- PRAWA STRONA ‚Äì FORMULARZE -->
    <div class="login-section">
      <div class="login-container">

        <div class="auth-tabs">
          <button class="tab active" data-tab="login">Logowanie</button>
          <button class="tab" data-tab="register">Rejestracja</button>
        </div>

        <!-- LOGOWANIE -->
        <div id="login-form" class="auth-form active">
          <h2 class="login-title">Zaloguj siƒô</h2>

          <form id="login-form-element">
            <div class="form-group">
              <label for="login-username">Nazwa u≈ºytkownika</label>
              <input type="text" id="login-username" placeholder="Twoja nazwa" autocomplete="username" required />
            </div>

            <div class="form-group">
              <label for="login-password">Has≈Ço</label>
              <input type="password" id="login-password" placeholder="Has≈Ço" autocomplete="current-password" required />
            </div>

            <div class="form-group">
              <label for="login-pem-file">Klucz prywatny (.pem)</label>
              <input type="file" id="login-pem-file" accept=".pem,.txt" required />
              <small>Wybierz klucz pobrany podczas rejestracji</small>
            </div>

            <button class="login-btn" type="submit">Zaloguj siƒô</button>

            <div id="login-status" class="login-status"></div>
          </form>
        </div>

        <!-- REJESTRACJA -->
        <div id="register-form" class="auth-form">
          <h2 class="login-title">Utw√≥rz konto</h2>

          <form id="register-form-element">
            <div class="form-group">
              <label for="register-username">Nazwa u≈ºytkownika</label>
              <input type="text" id="register-username" minlength="3" maxlength="32" pattern="[a-zA-Z0-9_]+" required />
              <small>Dozwolone: litery, cyfry, _</small>
            </div>

            <div class="form-group">
              <label for="register-password">Has≈Ço</label>
              <input type="password" id="register-password" minlength="8" required />
              <small>Min. 8 znak√≥w: du≈ºa litera, cyfra, symbol</small>
            </div>

            <div class="form-group">
              <label for="register-password-repeat">Powt√≥rz has≈Ço</label>
              <input type="password" id="register-password-repeat" required />
            </div>

            <button class="login-btn" type="submit">Utw√≥rz konto</button>

            <div id="register-status" class="login-status"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL KLUCZA PRIVATE KEY -->
  <div id="key-download-modal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Tw√≥j klucz prywatny</h3>
        <button class="modal-close" id="key-modal-close">√ó</button>
      </div>

      <div class="modal-body">
        <p>
          Poni≈ºej mo≈ºesz pobraƒá sw√≥j klucz prywatny (.pem).  
          Przechowuj go lokalnie ‚Äì **bez niego nie zalogujesz siƒô do konta**.
        </p>

        <button id="download-key-btn" class="action-btn">Pobierz klucz .pem</button>
      </div>
    </div>
  </div>

  <!-- OVERLAY ≈ÅADOWANIA -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Przetwarzanie‚Ä¶</div>
    </div>
  </div>

  <!-- TOASTY -->
  <div id="toast-container" class="toast-container"></div>

  <!-- SKRYPTY -->
  <script src="form-tabs.js"></script>
  <script type="module" src="register.js"></script>
  <script type="module" src="login.js"></script>
</body>
</html>
